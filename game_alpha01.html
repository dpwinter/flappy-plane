<!DOCTYPE html>
<html>
  <head>  
    <meta charset="utf-8" />
  <title>Gamedev Canvas Workshop</title>
  <style>
    * { padding: 0; margin: 0; }
    canvas { background: #eee; display: block; margin: 0 auto; }
  </style>
</head>
<body>
  <!-- Java class construct -->
  <script type='text/javascript', src='java_class.js'></script>
  <!-- Items to Pick up -->
  <script type='text/javascript', src='Item.js'></script>
  <!-- Item Handler Class -->
  <script type='text/javascript', src='ItemHandler.js'></script>
  <!-- Vector library -->
  <script type='text/javascript', src='vector.js'></script>
  <!-- Hero Class -->
  <script type='text/javascript', src='Hero.js'></script>
  <!-- Camera Class -->
  <script type='text/javascript', src='Camera.js'></script>

  <canvas id="myCanvas" width="480" height="320"></canvas>

  <script>
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");
    var hero = new Hero(100, canvas.height/2, 20, ctx);
    var item_handler = new ItemHandler(hero, ctx);
    var cam = new Camera(canvas, ctx, hero);

    var score = 0;
    var lives = 3;
    var keyPressed = false;

    var offset = canvas.width + 100;

    var iter = 0;
    var iterLimit = 100;
    item_handler.spawnItem(offset, 200);

    function draw() {
      // reset the transform matrix as it is cumulative
      //ctx.setTransform(1,0,0,1,0,0);
      // clear the content every iteration.
      ctx.clearRect(0,0,canvas.width, canvas.height);

      iter++;
      // time interval for spawn
      if(iter > iterLimit) {
        item_handler.spawnItem(offset, getRandom(item_handler.radius, canvas.height - item_handler.radius));
        iter = 0;
        iterLimit = getRandom(50, 200);
      }

//      cam.update();
      hero.display();
      //ctx.translate(hero.loc.x, 0);
      item_handler.update();
    }

    // frameRate every 10 miliseconds
    setInterval(draw, 10);

    function getRandom(min, max) {
      return Math.random() * (max - min) + min;
    }
  </script>

</body>

</html>
