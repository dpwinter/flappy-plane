<!DOCTYPE html>
<html>
  <head>  
    <meta charset="utf-8" />
  <title>Flappy Birds Like Browser Game</title>
  <style>
    * { padding: 0; margin: 0; }
    canvas { background: #eee; display: block; margin: 0 auto; }
  </style>
</head>
<body>
  <!-- Vector library -->
  <script type='text/javascript', src='vector.js'></script>
  <!-- Game Object Parent Class -->
  <script type='text/javascript', src='GameObject.js'></script>
  <!-- Game Controller handles all events -->
  <script type='text/javascript', src='GameController.js'></script>

  <canvas id="myCanvas" width="800" height="640"></canvas>

  <script>
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");
    var ctrl = new GameController();
    ctrl.initialize();
    window.addEventListener('keydown', this.userInput, false);

    var pause = false;
    var flapable = false;
    var gameOver = false;
    var frameCount = 0;

    var gravity = new Vector2D(0,5);
    var velocity = new Vector2D(-5, 0);

    function setup() {
      ctrl = new GameController();
      ctrl.initialize();
    }

    function draw() {
      if(gameOver) {
        setup();
        gameOver = false;
      }
      else {
        if (!pause) {

          ctx.clearRect(0,0,canvas.width, canvas.height);
          frameCount++;

          if (frameCount % 15 == 0) flapable = true;
          if (frameCount % 60 == 0) ctrl.spawnItem(velocity);
          ctrl.update(gravity);

        } else ctrl.drawPause();
      }
    }

    // 30 fps
    setInterval(draw, (1000 / 30));

    <!-- KEYBOARD INPUT CONTROLS -->

    function userInput(e) {
      // space for flap
      if(e.keyCode == 32 && flapable) {
        ctrl.hero.flap();
        flapable = false;
      }
      // p for pause
      else if (e.keyCode == 80) pause = !pause;
      // r for restart
      else if (e.keyCode == 82) gameOver = true;

    }

    <!-- HELPER METHODS -->
    
    function getRandom(min, max) {
      return Math.random() * (max - min) + min;
    }

    Array.prototype.remove = function(from, to) {
      var rest = this.slice((to || from) + 1 || this.length);
      this.length = from < 0 ? this.length + from : from;
      return this.push.apply(this, rest);
    }
  </script>

</body>

</html>
